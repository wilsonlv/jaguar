package ${package.Controller};

import com.jaguar.core.util.InstanceUtil;
import com.jaguar.web.base.AbstractController;
import org.apache.shiro.authz.annotation.RequiresPermissions;
import org.springframework.web.bind.annotation.*;
import org.springframework.http.ResponseEntity;
import ${package.Entity}.${entity};
import ${package.ServiceImpl}.${entity}Service;

import io.swagger.annotations.Api;
import io.swagger.annotations.ApiParam;
import io.swagger.annotations.ApiOperation;

import java.util.Map;

import com.jaguar.web.JsonResult;
import static com.jaguar.core.constant.Constant.*;

/**
 * <p>
 * ${table.comment}  前端控制器
 * </p>
 *
 * @author ${author}
 * @since ${date}
 */
@RestController
@Api(value = "${table.comment}管理", description = "${table.comment}管理")
@RequestMapping("/${table.name}")
#if(${superControllerClass})
public class ${table.controllerName} extends ${superControllerClass}<${entity}Service> {
#else
public class ${table.controllerName} {
#end

    @ApiOperation(value = "查询${table.comment}")
    @RequiresPermissions("${table.entityPath}:read")
    @GetMapping(value = "/list")
    public ResponseEntity<JsonResult> query(
            @ApiParam(value = "页码") @RequestParam(required = false) Integer page,
            @ApiParam(value = "页量") @RequestParam(required = false) Integer rows){

        Map<String, Object> param=InstanceUtil.newHashMap();
        param.put(PAGE,page);
        param.put(ROWS,rows);
        param.put(DELETED,0);

        return super.query(param);
    }

    @ApiOperation(value = "${table.comment}详情")
    @RequiresPermissions("${table.entityPath}:read")
    @GetMapping(value = "/detail/{id}")
    public ResponseEntity<JsonResult> get(@PathVariable Long id){
        return super.get(id);
    }

    @ApiOperation(value = "修改${table.comment}")
    @RequiresPermissions("${table.entityPath}:update")
    @PostMapping(value = "/update")
    public ResponseEntity<JsonResult> update(${entity} param){
        return super.update(param);
    }

    @ApiOperation(value = "删除${table.comment}")
    @RequiresPermissions("${table.entityPath}:update")
    @DeleteMapping(value = "/del/{id}")
    public ResponseEntity<JsonResult> del(@PathVariable Long id){
        return super.del(id);
    }

    @ApiOperation(value = "删除${table.comment}")
    @RequiresPermissions("${table.entityPath}:update")
    @DeleteMapping(value = "/delete/{id}")
    public ResponseEntity<JsonResult> delete(@PathVariable Long id){
        return super.delete(id);
    }
}